define("block_deft/form",["exports","core_form/dynamicform","core/notification"],function(_exports,_dynamicform,_notification){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_dynamicform=_interopRequireDefault(_dynamicform),_notification=_interopRequireDefault(_notification);return _exports.default=class{constructor(contextid,type,task){const dynamicForm=new _dynamicform.default(document.querySelector('[data-id="'+task+'"] [data-region="status"] div.row'),"block_deft\\form\\status_"+type);dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED,e=>{e.preventDefault(),dynamicForm.load({contextid:contextid,id:task}).then(()=>{const form=document.querySelector('[data-id="'+task+'"] [data-region="status"] form'),data=new FormData(form),params=new URLSearchParams(data);return form.setAttribute("data-value",params.toString()),document.body.dispatchEvent(new CustomEvent("deftaction",{})),!0}).fail(_notification.default.exception)}),document.querySelectorAll('[data-id="'+task+'"] [data-region="status"] form').forEach(form=>{const data=new FormData(form),params=new URLSearchParams(data);form.setAttribute("data-value",params.toString())})}},_exports.default});

//# sourceMappingURL=form.min.js.map