{"version":3,"file":"form.min.js","sources":["../src/form.js"],"sourcesContent":["import DynamicForm from 'core_form/dynamicform';\nimport Notification from 'core/notification';\n\nexport default class {\n    constructor(contextid, type, task) {\n        const dynamicForm = new DynamicForm(\n            document.querySelector('[data-id=\"' + task + '\"] [data-region=\"status\"] div.row'),\n            'block_deft\\\\form\\\\status_' + type\n        );\n\n        dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED, (e) => {\n            e.preventDefault();\n            dynamicForm.load({\n                contextid: contextid,\n                id: task\n            }).then(() => {\n                const form = document.querySelector('[data-id=\"' + task + '\"] [data-region=\"status\"] form'),\n                    data = new FormData(form),\n                    params = new URLSearchParams(data);\n                form.setAttribute('data-value', params.toString());\n                document.body.dispatchEvent(new CustomEvent('deftaction', { }));\n\n                return true;\n            }).fail(Notification.exception);\n        });\n\n        document.querySelectorAll('[data-id=\"' + task + '\"] [data-region=\"status\"] form').forEach((form) => {\n            const data = new FormData(form),\n                params = new URLSearchParams(data);\n            form.setAttribute('data-value', params.toString());\n        });\n    }\n}\n"],"names":["_interopRequireDefault","e","__esModule","default","_dynamicform","_notification","_exports","constructor","contextid","type","task","dynamicForm","DynamicForm","document","querySelector","addEventListener","events","FORM_SUBMITTED","preventDefault","load","id","then","form","data","FormData","params","URLSearchParams","setAttribute","toString","body","dispatchEvent","CustomEvent","fail","Notification","exception","querySelectorAll","forEach"],"mappings":"+HAC6C,SAAAA,uBAAAC,GAAAA,OAAAA,GAAAA,EAAAC,WAAAD,EAAAE,CAAAA,QAAAF,EAAA,iFAD7CG,aAAAJ,uBAAAI,cACAC,cAAAL,uBAAAK,eA+BC,OAAAC,SAAAH,QA7Bc,MACXI,WAAAA,CAAYC,UAAWC,KAAMC,MACzB,MAAMC,YAAc,IAAIC,qBACpBC,SAASC,cAAc,aAAeJ,KAAO,qCAC7C,4BAA8BD,MAGlCE,YAAYI,iBAAiBJ,YAAYK,OAAOC,eAAiBhB,IAC7DA,EAAEiB,iBACFP,YAAYQ,KAAK,CACbX,UAAWA,UACXY,GAAIV,OACLW,KAAK,KACJ,MAAMC,KAAOT,SAASC,cAAc,aAAeJ,KAAO,kCACtDa,KAAO,IAAIC,SAASF,MACpBG,OAAS,IAAIC,gBAAgBH,MAIjC,OAHAD,KAAKK,aAAa,aAAcF,OAAOG,YACvCf,SAASgB,KAAKC,cAAc,IAAIC,YAAY,aAAc,CAAG,KAEtD,IACRC,KAAKC,cAAY9B,QAAC+B,aAGzBrB,SAASsB,iBAAiB,aAAezB,KAAO,kCAAkC0B,QAASd,OACvF,MAAMC,KAAO,IAAIC,SAASF,MACtBG,OAAS,IAAIC,gBAAgBH,MACjCD,KAAKK,aAAa,aAAcF,OAAOG,aAE/C,GACHtB,SAAAH,OAAA"}