{"version":3,"file":"form.min.js","sources":["../src/form.js"],"sourcesContent":["import DynamicForm from 'core_form/dynamicform';\nimport Notification from 'core/notification';\n\nexport default class {\n    constructor(contextid, type, task) {\n        const dynamicForm = new DynamicForm(\n            document.querySelector('[data-id=\"' + task + '\"] [data-region=\"status\"] div.row'),\n            'block_deft\\\\form\\\\status_' + type\n        );\n\n        dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED, (e) => {\n            e.preventDefault();\n            dynamicForm.load({\n                contextid: contextid,\n                id: task\n            }).then(() => {\n                const form = document.querySelector('[data-id=\"' + task + '\"] [data-region=\"status\"] form'),\n                    data = new FormData(form),\n                    params = new URLSearchParams(data);\n                form.setAttribute('data-value', params.toString());\n                document.body.dispatchEvent(new CustomEvent('deftaction', { }));\n\n                return true;\n            }).fail(Notification.exception);\n        });\n\n        document.querySelectorAll('[data-id=\"' + task + '\"] [data-region=\"status\"] form').forEach((form) => {\n            const data = new FormData(form),\n                params = new URLSearchParams(data);\n            form.setAttribute('data-value', params.toString());\n        });\n    }\n}\n"],"names":["constructor","contextid","type","task","dynamicForm","DynamicForm","document","querySelector","addEventListener","events","FORM_SUBMITTED","e","preventDefault","load","id","then","form","data","FormData","params","URLSearchParams","setAttribute","toString","body","dispatchEvent","CustomEvent","fail","Notification","exception","querySelectorAll","forEach"],"mappings":"saAIIA,YAAYC,UAAWC,KAAMC,YACnBC,YAAc,IAAIC,qBACpBC,SAASC,cAAc,aAAeJ,KAAO,qCAC7C,4BAA8BD,MAGlCE,YAAYI,iBAAiBJ,YAAYK,OAAOC,gBAAiBC,IAC7DA,EAAEC,iBACFR,YAAYS,KAAK,CACbZ,UAAWA,UACXa,GAAIX,OACLY,MAAK,WACEC,KAAOV,SAASC,cAAc,aAAeJ,KAAO,kCACtDc,KAAO,IAAIC,SAASF,MACpBG,OAAS,IAAIC,gBAAgBH,aACjCD,KAAKK,aAAa,aAAcF,OAAOG,YACvChB,SAASiB,KAAKC,cAAc,IAAIC,YAAY,aAAc,MAEnD,KACRC,KAAKC,sBAAaC,cAGzBtB,SAASuB,iBAAiB,aAAe1B,KAAO,kCAAkC2B,SAASd,aACjFC,KAAO,IAAIC,SAASF,MACtBG,OAAS,IAAIC,gBAAgBH,MACjCD,KAAKK,aAAa,aAAcF,OAAOG"}