{"version":3,"file":"form.min.js","sources":["../src/form.js"],"sourcesContent":["import DynamicForm from 'core_form/dynamicform';\nimport Log from 'core/log';\nimport Notification from 'core/notification';\n\nexport default class {\n    constructor(contextid, type, task) {\n        const dynamicForm = new DynamicForm(\n            document.querySelector('[data-id=\"' + task + '\"] [data-region=\"status\"]'),\n            'block_deft\\\\form\\\\status_' + type\n        );\n\n        dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED, (e) => {\n            e.preventDefault();\n            const response = e.detail;\n            Log.debug(response);\n            dynamicForm.load({\n                contextid: contextid,\n                id: task\n            }).then(() => {\n                const form = document.querySelector('[data-id=\"' + task + '\"] [data-region=\"status\"] form'),\n                    data = new FormData(form),\n                    params = new URLSearchParams(data);\n                form.setAttribute('data-value', params.toString());\n                return true;\n            }).fail(Notification.exception);\n        });\n\n        document.querySelectorAll('[data-id=\"' + task + '\"] [data-region=\"status\"] form').forEach((form) => {\n            const data = new FormData(form),\n                params = new URLSearchParams(data);\n            form.setAttribute('data-value', params.toString());\n        });\n    }\n}\n"],"names":["contextid","type","task","dynamicForm","DynamicForm","document","querySelector","addEventListener","events","FORM_SUBMITTED","e","preventDefault","response","detail","debug","load","id","then","form","data","FormData","params","URLSearchParams","setAttribute","toString","fail","Notification","exception","querySelectorAll","forEach"],"mappings":"2wBAKI,kBAAYA,UAAWC,KAAMC,yJACnBC,YAAc,IAAIC,qBACpBC,SAASC,cAAc,aAAeJ,KAAO,6BAC7C,4BAA8BD,MAGlCE,YAAYI,iBAAiBJ,YAAYK,OAAOC,gBAAgB,SAACC,GAC7DA,EAAEC,qBACIC,SAAWF,EAAEG,oBACfC,MAAMF,UACVT,YAAYY,KAAK,CACbf,UAAWA,UACXgB,GAAId,OACLe,MAAK,eACEC,KAAOb,SAASC,cAAc,aAAeJ,KAAO,kCACtDiB,KAAO,IAAIC,SAASF,MACpBG,OAAS,IAAIC,gBAAgBH,aACjCD,KAAKK,aAAa,aAAcF,OAAOG,aAChC,KACRC,KAAKC,sBAAaC,cAGzBtB,SAASuB,iBAAiB,aAAe1B,KAAO,kCAAkC2B,SAAQ,SAACX,UACjFC,KAAO,IAAIC,SAASF,MACtBG,OAAS,IAAIC,gBAAgBH,MACjCD,KAAKK,aAAa,aAAcF,OAAOG"}