{"version":3,"file":"form.min.js","sources":["../src/form.js"],"sourcesContent":["import DynamicForm from 'core_form/dynamicform';\nimport Log from 'core/log';\nimport Notification from 'core/notification';\n\nexport default class {\n    constructor(contextid, type, task) {\n        const dynamicForm = new DynamicForm(\n            document.querySelector('[data-id=\"' + task + '\"] [data-region=\"status\"]'),\n            'block_deft\\\\form\\\\status_' + type\n        );\n\n        dynamicForm.addEventListener(dynamicForm.events.FORM_SUBMITTED, (e) => {\n            e.preventDefault();\n            const response = e.detail;\n            Log.debug(response);\n            dynamicForm.load({\n                contextid: contextid,\n                id: task\n            }).then(() => {\n                const form = document.querySelector('[data-id=\"' + task + '\"] [data-region=\"status\"] form'),\n                    data = new FormData(form),\n                    params = new URLSearchParams(data);\n                form.setAttribute('data-value', params.toString());\n                return true;\n            }).fail(Notification.exception);\n        });\n\n        document.querySelectorAll('[data-id=\"' + task + '\"] [data-region=\"status\"] form').forEach((form) => {\n            const data = new FormData(form),\n                params = new URLSearchParams(data);\n            form.setAttribute('data-value', params.toString());\n        });\n    }\n}\n"],"names":["_interopRequireDefault","obj","__esModule","default","_dynamicform","_log","_notification","_exports","constructor","contextid","type","task","dynamicForm","DynamicForm","document","querySelector","addEventListener","events","FORM_SUBMITTED","e","preventDefault","response","detail","Log","debug","load","id","then","form","data","FormData","params","URLSearchParams","setAttribute","toString","fail","Notification","exception","querySelectorAll","forEach"],"mappings":"gJAE6C,SAAAA,uBAAAC,KAAAA,OAAAA,KAAAA,IAAAC,WAAAD,IAAAE,CAAAA,QAAAF,IAAA,iFAF7CG,aAAAJ,uBAAAI,cACAC,KAAAL,uBAAAK,MACAC,cAAAN,uBAAAM,eA+BC,OAAAC,SAAAJ,QA7Bc,MACXK,YAAYC,UAAWC,KAAMC,MACzB,MAAMC,YAAc,IAAIC,qBACpBC,SAASC,cAAc,aAAeJ,KAAO,6BAC7C,4BAA8BD,MAGlCE,YAAYI,iBAAiBJ,YAAYK,OAAOC,gBAAiBC,IAC7DA,EAAEC,iBACF,MAAMC,SAAWF,EAAEG,OACnBC,KAAAA,QAAIC,MAAMH,UACVT,YAAYa,KAAK,CACbhB,UAAWA,UACXiB,GAAIf,OACLgB,MAAK,KACJ,MAAMC,KAAOd,SAASC,cAAc,aAAeJ,KAAO,kCACtDkB,KAAO,IAAIC,SAASF,MACpBG,OAAS,IAAIC,gBAAgBH,MAEjC,OADAD,KAAKK,aAAa,aAAcF,OAAOG,aAChC,CAAI,IACZC,KAAKC,cAAYjC,QAACkC,UAAU,IAGnCvB,SAASwB,iBAAiB,aAAe3B,KAAO,kCAAkC4B,SAASX,OACvF,MAAMC,KAAO,IAAIC,SAASF,MACtBG,OAAS,IAAIC,gBAAgBH,MACjCD,KAAKK,aAAa,aAAcF,OAAOG,WAAW,GAE1D,GACH3B,SAAAJ,OAAA"}