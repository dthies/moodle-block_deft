{"version":3,"file":"venue.min.js","sources":["../src/venue.js"],"sourcesContent":["/*\n * Handle events for venue task\n *\n * @package    block_deft\n * @module     block_deft/choose\n * @copyright  2022 Daniel Thies <dethies@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from 'core/ajax';\nimport Log from 'core/log';\nimport Config from 'core/config';\nimport Notification from 'core/notification';\n\n/**\n * Handle button click\n *\n * @param {Event} e Change event\n */\nconst handleClick = (e) => {\n    'use strict';\n\n    let button = e.target.closest('.block_deft_venue a[data-action]');\n    if (button) {\n        let task = button.closest('[data-task]').getAttribute('data-task'),\n            url = new URL(Config.wwwroot + '/blocks/deft/venue.php');\n        url.searchParams.set('task', task);\n        switch (button.getAttribute('data-action')) {\n            case 'close':\n                Ajax.call([{\n                    args: {\n                        mute: false,\n                        \"status\": true\n                    },\n                    fail: Notification.exception,\n                    methodname: 'block_deft_venue_settings'\n                }]);\n                break;\n            case 'join':\n                window.open(url, 'block_deft_venue', 'popup,height=400,width=600');\n                break;\n            case 'mute':\n                Ajax.call([{\n                    args: {\n                        mute: true,\n                        \"status\": false\n                    },\n                    fail: Notification.exception,\n                    methodname: 'block_deft_venue_settings'\n                }]);\n                break;\n            case 'unmute':\n                Ajax.call([{\n                    args: {\n                        mute: false,\n                        \"status\": false\n                    },\n                    fail: Notification.exception,\n                    methodname: 'block_deft_venue_settings'\n                }]);\n                break;\n            default:\n                return;\n        }\n        e.stopPropagation();\n        e.preventDefault();\n        Log.debug(e);\n        document.activeElement.blur();\n    }\n};\n\n/**\n * Initialize listeners\n *\n */\nexport const init = () => {\n    'use strict';\n\n    document.removeEventListener('click', handleClick);\n    document.addEventListener('click', handleClick);\n};\n"],"names":["handleClick","e","button","target","closest","task","getAttribute","url","URL","Config","wwwroot","searchParams","set","call","args","mute","fail","Notification","exception","methodname","window","open","stopPropagation","preventDefault","debug","document","activeElement","blur","removeEventListener","addEventListener"],"mappings":";;;;;;;;0PAmBMA,YAAeC,QAGbC,OAASD,EAAEE,OAAOC,QAAQ,uCAC1BF,OAAQ,KACJG,KAAOH,OAAOE,QAAQ,eAAeE,aAAa,aAClDC,IAAM,IAAIC,IAAIC,gBAAOC,QAAU,iCACnCH,IAAII,aAAaC,IAAI,OAAQP,MACrBH,OAAOI,aAAa,oBACnB,sBACIO,KAAK,CAAC,CACPC,KAAM,CACFC,MAAM,UACI,GAEdC,KAAMC,sBAAaC,UACnBC,WAAY,yCAGf,OACDC,OAAOC,KAAKd,IAAK,mBAAoB,wCAEpC,qBACIM,KAAK,CAAC,CACPC,KAAM,CACFC,MAAM,UACI,GAEdC,KAAMC,sBAAaC,UACnBC,WAAY,yCAGf,uBACIN,KAAK,CAAC,CACPC,KAAM,CACFC,MAAM,UACI,GAEdC,KAAMC,sBAAaC,UACnBC,WAAY,oDAMxBlB,EAAEqB,kBACFrB,EAAEsB,8BACEC,MAAMvB,GACVwB,SAASC,cAAcC,uBAQX,KAGhBF,SAASG,oBAAoB,QAAS5B,aACtCyB,SAASI,iBAAiB,QAAS7B"}