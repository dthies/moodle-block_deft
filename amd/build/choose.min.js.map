{"version":3,"file":"choose.min.js","sources":["../src/choose.js"],"sourcesContent":["/*\n * Handle for change for choice seletion\n *\n * @package    block_deft\n * @module     block_deft/choose\n * @copyright  2022 Daniel Thies <dethies@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Fragment from 'core/fragment';\nimport Log from 'core/log';\n\nvar contextid;\n\n/**\n * Handle selection change\n *\n * @param {Event} e Change event\n */\nconst handleChange = (e) => {\n    let form = e.target.closest('.deft-choice-selector form');\n    if (form) {\n        let formdata = new FormData(form),\n            id = formdata.get('id'),\n            component = form.closest('[data-component]')\n                && form.closest('[data-component]').getAttribute('data-component')\n                || 'block_deft',\n            option = formdata.get('option');\n        e.stopPropagation();\n        e.preventDefault();\n        Fragment.loadFragment(\n            component,\n            'choose',\n            contextid,\n            {\n                id: id,\n                option: option\n            }\n        ).catch(Log.debug);\n        document.activeElement.blur();\n        document.body.dispatchEvent(new CustomEvent('deftaction', { }));\n    }\n};\n\n/**\n * Initialize listeners\n *\n * @param {int} id Context id of content bank\n */\nexport const init = (id) => {\n    'use strict';\n\n    contextid = id;\n\n    document.removeEventListener('change', handleChange);\n    document.addEventListener('change', handleChange);\n};\n"],"names":["_interopRequireDefault","e","__esModule","default","contextid","_fragment","_log","handleChange","form","target","closest","formdata","FormData","id","get","component","getAttribute","option","stopPropagation","preventDefault","Fragment","loadFragment","catch","Log","debug","document","activeElement","blur","body","dispatchEvent","CustomEvent","_exports","init","removeEventListener","addEventListener"],"mappings":"oGAU2B,SAAAA,uBAAAC,GAAAA,OAAAA,GAAAA,EAAAC,WAAAD,EAAAE,CAAAA,QAAAF,EAAA;;;;;;;;KAE3B,IAAIG,uFAHJC,UAAAL,uBAAAK,WACAC,KAAAN,uBAAAM,MASA,MAAMC,aAAgBN,IAClB,IAAIO,KAAOP,EAAEQ,OAAOC,QAAQ,8BAC5B,GAAIF,KAAM,CACN,IAAIG,SAAW,IAAIC,SAASJ,MACxBK,GAAKF,SAASG,IAAI,MAClBC,UAAYP,KAAKE,QAAQ,qBAClBF,KAAKE,QAAQ,oBAAoBM,aAAa,mBAC9C,aACPC,OAASN,SAASG,IAAI,UAC1Bb,EAAEiB,kBACFjB,EAAEkB,iBACFC,UAAQjB,QAACkB,aACLN,UACA,SACAX,UACA,CACIS,GAAIA,GACJI,OAAQA,SAEdK,MAAMC,KAAGpB,QAACqB,OACZC,SAASC,cAAcC,OACvBF,SAASG,KAAKC,cAAc,IAAIC,YAAY,aAAc,CAAG,GACjE,GAeFC,SAAAC,KAPmBnB,KAGjBT,UAAYS,GAEZY,SAASQ,oBAAoB,SAAU1B,cACvCkB,SAASS,iBAAiB,SAAU3B,cACtC"}