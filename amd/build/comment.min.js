define("block_deft/comment",["exports","core_form/modalform","core/str"],(function(_exports,_modalform,_str){var obj;
/*
   * Change comments
   *
   * @package    block_deft
   * @module     block_deft/comment
   * @copyright  2022 Daniel Thies <dethies@gmail.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};var _default={init:function(contextid,selector,refresh){document.querySelector(selector).addEventListener("click",(e=>{const button=e.target.closest('[data-type="comments"] [data-action]');if(button){let modalForm;switch(e.preventDefault(),e.stopPropagation(),button.getAttribute("data-action")){case"addcomment":modalForm=new _modalform.default({formClass:"block_deft\\form\\add_comment",args:{contextid:contextid,id:button.closest("[data-task]").getAttribute("data-task")},modalConfig:{title:(0,_str.get_string)("addcomment")}});break;case"delete":modalForm=new _modalform.default({formClass:"block_deft\\form\\delete_comment",args:{commentid:button.closest("[data-comment]").getAttribute("data-comment"),contextid:contextid,id:button.closest("[data-task]").getAttribute("data-task")},modalConfig:{title:(0,_str.get_string)("confirm")}});break;case"collapse":return button.closest("[data-modified]").setAttribute("data-modified",0),button.closest("[data-type]").querySelector(".block_deft_comments").classList.remove("expanded"),void refresh.update();case"expand":return button.closest("[data-modified]").setAttribute("data-modified",0),button.closest("[data-type]").querySelector(".block_deft_comments").classList.add("expanded"),void refresh.update()}modalForm.show()}}))}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=comment.min.js.map